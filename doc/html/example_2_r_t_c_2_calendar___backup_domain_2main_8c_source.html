<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>HT32F5xxxx Standard Peripheral Firmware Library: main.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">HT32F5xxxx Standard Peripheral Firmware Library&#160;<span id="projectnumber">V1.9.1(7446)</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_0cbec8d0f1c6667f8ce34d8fd5775a93.html">example</a>      </li>
      <li class="navelem"><a class="el" href="dir_de5a7f26e3c871bdb2b74b8c049b10f9.html">RTC</a>      </li>
      <li class="navelem"><a class="el" href="dir_2bf0f27416e1819c0371d0039df88414.html">Calendar_BackupDomain</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">example/RTC/Calendar_BackupDomain/main.c</div>  </div>
</div>
<div class="contents">
<a href="example_2_r_t_c_2_calendar___backup_domain_2main_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*********************************************************************************************************/</span><span class="comment">/**</span>
<a name="l00002"></a>00002 <span class="comment"> * @file    RTC/Calendar_BackupDomain/main.c</span>
<a name="l00003"></a>00003 <span class="comment"> * @version $Rev:: 6853         $</span>
<a name="l00004"></a>00004 <span class="comment"> * @date    $Date:: 2023-04-11 #$</span>
<a name="l00005"></a>00005 <span class="comment"> * @brief   Main program.</span>
<a name="l00006"></a>00006 <span class="comment"> *************************************************************************************************************</span>
<a name="l00007"></a>00007 <span class="comment"> * @attention</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * Firmware Disclaimer Information</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * 1. The customer hereby acknowledges and agrees that the program technical documentation, including the</span>
<a name="l00012"></a>00012 <span class="comment"> *    code, which is supplied by Holtek Semiconductor Inc., (hereinafter referred to as &quot;HOLTEK&quot;) is the</span>
<a name="l00013"></a>00013 <span class="comment"> *    proprietary and confidential intellectual property of HOLTEK, and is protected by copyright law and</span>
<a name="l00014"></a>00014 <span class="comment"> *    other intellectual property laws.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> * 2. The customer hereby acknowledges and agrees that the program technical documentation, including the</span>
<a name="l00017"></a>00017 <span class="comment"> *    code, is confidential information belonging to HOLTEK, and must not be disclosed to any third parties</span>
<a name="l00018"></a>00018 <span class="comment"> *    other than HOLTEK and the customer.</span>
<a name="l00019"></a>00019 <span class="comment"> *</span>
<a name="l00020"></a>00020 <span class="comment"> * 3. The program technical documentation, including the code, is provided &quot;as is&quot; and for customer reference</span>
<a name="l00021"></a>00021 <span class="comment"> *    only. After delivery by HOLTEK, the customer shall use the program technical documentation, including</span>
<a name="l00022"></a>00022 <span class="comment"> *    the code, at their own risk. HOLTEK disclaims any expressed, implied or statutory warranties, including</span>
<a name="l00023"></a>00023 <span class="comment"> *    the warranties of merchantability, satisfactory quality and fitness for a particular purpose.</span>
<a name="l00024"></a>00024 <span class="comment"> *</span>
<a name="l00025"></a>00025 <span class="comment"> * &lt;h2&gt;&lt;center&gt;Copyright (C) Holtek Semiconductor Inc. All rights reserved&lt;/center&gt;&lt;/h2&gt;</span>
<a name="l00026"></a>00026 <span class="comment"> ************************************************************************************************************/</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="comment">/* Includes ------------------------------------------------------------------------------------------------*/</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="ht32_8h.html" title="The API between application and HT32FXXXX Firmware Library.">ht32.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="ht32__board_8h.html" title="HT32 target board definition file.">ht32_board.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="comment"></span>
<a name="l00032"></a>00032 <span class="comment">/** @addtogroup HT32_Series_Peripheral_Examples HT32 Peripheral Examples</span>
<a name="l00033"></a>00033 <span class="comment">  * @{</span>
<a name="l00034"></a>00034 <span class="comment">  */</span>
<a name="l00035"></a>00035 <span class="comment"></span>
<a name="l00036"></a>00036 <span class="comment">/** @addtogroup RTC_Examples RTC</span>
<a name="l00037"></a>00037 <span class="comment">  * @{</span>
<a name="l00038"></a>00038 <span class="comment">  */</span>
<a name="l00039"></a>00039 <span class="comment"></span>
<a name="l00040"></a>00040 <span class="comment">/** @addtogroup Calendar_BackupDomain</span>
<a name="l00041"></a>00041 <span class="comment">  * @{</span>
<a name="l00042"></a>00042 <span class="comment">  */</span>
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="comment">/* Private typedef -----------------------------------------------------------------------------------------*/</span>
<a name="l00045"></a><a class="code" href="struct_time___t.html">00045</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00046"></a>00046 {
<a name="l00047"></a><a class="code" href="struct_time___t.html#af1038645264576b52b7646bd82dda585">00047</a>   <a class="code" href="group___exported___types.html#ga10e94b422ef0c20dcdec20d31a1f5049">u32</a> <a class="code" href="struct_time___t.html#af1038645264576b52b7646bd82dda585">year</a>;
<a name="l00048"></a><a class="code" href="struct_time___t.html#aba697bf3a54c4c7e1515a794ebde0a52">00048</a>   <a class="code" href="group___exported___types.html#ga10e94b422ef0c20dcdec20d31a1f5049">u32</a> <a class="code" href="struct_time___t.html#aba697bf3a54c4c7e1515a794ebde0a52">month</a>;
<a name="l00049"></a><a class="code" href="struct_time___t.html#a1c3106686234730294094e8ae38a9971">00049</a>   <a class="code" href="group___exported___types.html#ga10e94b422ef0c20dcdec20d31a1f5049">u32</a> <a class="code" href="struct_time___t.html#a1c3106686234730294094e8ae38a9971">day</a>;
<a name="l00050"></a><a class="code" href="struct_time___t.html#aeb6d0d33282a3ff4574b25a63e36e214">00050</a>   <a class="code" href="group___exported___types.html#ga10e94b422ef0c20dcdec20d31a1f5049">u32</a> <a class="code" href="struct_time___t.html#aeb6d0d33282a3ff4574b25a63e36e214">hour</a>;
<a name="l00051"></a><a class="code" href="struct_time___t.html#a507c5c7cb265428d8f811e8b3093a63c">00051</a>   <a class="code" href="group___exported___types.html#ga10e94b422ef0c20dcdec20d31a1f5049">u32</a> <a class="code" href="struct_time___t.html#a507c5c7cb265428d8f811e8b3093a63c">minute</a>;
<a name="l00052"></a><a class="code" href="struct_time___t.html#abf8aa84883a37fa56e03e794ebb37acb">00052</a>   <a class="code" href="group___exported___types.html#ga10e94b422ef0c20dcdec20d31a1f5049">u32</a> <a class="code" href="struct_time___t.html#abf8aa84883a37fa56e03e794ebb37acb">second</a>;
<a name="l00053"></a>00053 }<a class="code" href="struct_time___t.html">Time_T</a>;
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="comment">/* Private constants ---------------------------------------------------------------------------------------*/</span>
<a name="l00056"></a><a class="code" href="group___calendar___backup_domain.html#ga1beeae6dea36793f4e6068b24bd13ac1">00056</a> <span class="preprocessor">#define PWRCU_BAKREG_0_RTC_KEY        (PWRCU_BAKREG_0)  </span><span class="comment">/* Backup Register 0                                */</span>
<a name="l00057"></a><a class="code" href="group___calendar___backup_domain.html#ga2cf6e82f20f01f4a57a5835b2740215f">00057</a> <span class="preprocessor">#define PWRCU_BAKREG_1_RTC_SECOND     (PWRCU_BAKREG_1)  </span><span class="comment">/* Backup Register 1                                */</span>
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 <span class="comment">/* Private variables ---------------------------------------------------------------------------------------*/</span>
<a name="l00060"></a><a class="code" href="group___calendar___backup_domain.html#ga852d47279e9b6a0223f6e2a1a10dc980">00060</a> <a class="code" href="group___exported___types.html#gaed742c436da53c1080638ce6ef7d13de">u8</a> <a class="code" href="group___calendar___backup_domain.html#ga852d47279e9b6a0223f6e2a1a10dc980">Day_Per_Month</a>[13] = {0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 <span class="comment">/* Global variables ----------------------------------------------------------------------------------------*/</span>
<a name="l00063"></a><a class="code" href="group___calendar___backup_domain.html#gadd1c65a4d8acc31e9ab749c82df25f8f">00063</a> <a class="code" href="struct_time___t.html">Time_T</a> <a class="code" href="group___calendar___backup_domain.html#gadd1c65a4d8acc31e9ab749c82df25f8f">DateTime</a>, <a class="code" href="group___calendar___backup_domain.html#ga2141433ffe606a7c2c1f771c607699ef">CurTime</a>;
<a name="l00064"></a><a class="code" href="group___calendar___backup_domain.html#gaeb06464010a55d904e0d3e22bd193c8c">00064</a> <a class="code" href="group___exported___types.html#ga86ffb81daa2cd6aa2bd910d2acc00088">vu8</a> <a class="code" href="group___calendar___backup_domain.html#gaeb06464010a55d904e0d3e22bd193c8c">CK_SECOND_Flag</a> = 0;
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 <span class="comment">/* Private function prototypes -----------------------------------------------------------------------------*/</span>
<a name="l00067"></a>00067 <span class="keywordtype">void</span> <a class="code" href="group___backup_data.html#ga539951c46341882b44b63c9f1969c1a5" title="Configures the RTC.">RTC_Configuration</a>(<span class="keywordtype">void</span>);
<a name="l00068"></a>00068 <span class="keywordtype">void</span> <a class="code" href="group___calendar___backup_domain.html#gaf74b118a6ac9a5cbab619b3b3376880c" title="Initialize time by values entered on the Hyperterminal.">AP_Time_Init</a>(<a class="code" href="struct_time___t.html">Time_T</a>* InitTime);
<a name="l00069"></a>00069 <span class="keywordtype">void</span> <a class="code" href="group___calendar___backup_domain.html#gab509ba66b6a9d5433ef2973a454ef91a" title="Shows the current time YYYY.MM.DD HH:MM:SS on the Hyperterminal.">AP_Time_Show</a>(<span class="keywordtype">void</span>);
<a name="l00070"></a>00070 <a class="code" href="group___exported___types.html#gaed742c436da53c1080638ce6ef7d13de">u8</a> <a class="code" href="group___calendar___backup_domain.html#gad4d6b5eb52e2a55c51920419f4d8f420" title="Adjust time according to 2014.1.1 00:00:00 and store the sum of second to PWRCU_BAKREG_1 register...">AP_Time_Adjust</a>(<a class="code" href="struct_time___t.html">Time_T</a>* AdjustTime);
<a name="l00071"></a>00071 <a class="code" href="group___exported___types.html#gaed742c436da53c1080638ce6ef7d13de">u8</a> <a class="code" href="group___calendar___backup_domain.html#ga6534896ff2b8c084689cf5c717fb7f0b" title="Calculate the current time.">AP_Time_Count</a>(<a class="code" href="struct_time___t.html">Time_T</a>* CurrentTime);
<a name="l00072"></a>00072 <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="group___calendar___backup_domain.html#ga2448b5456c2e0177377dc089ff265da2" title="Determine if a year is a leap year or not.">IsLeapYear</a>(<a class="code" href="group___exported___types.html#ga10e94b422ef0c20dcdec20d31a1f5049">u32</a> year);
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 <span class="comment">/* Global functions ----------------------------------------------------------------------------------------*/</span>
<a name="l00075"></a>00075 <span class="comment">/*********************************************************************************************************/</span><span class="comment">/**</span>
<a name="l00076"></a>00076 <span class="comment">  * @brief  Main program.</span>
<a name="l00077"></a>00077 <span class="comment">  * @retval None</span>
<a name="l00078"></a>00078 <span class="comment">  * @note At this stage the microcontroller clock setting is already configured,</span>
<a name="l00079"></a>00079 <span class="comment">  *       this is done through SystemInit() function which is called from startup</span>
<a name="l00080"></a>00080 <span class="comment">  *       file (startup_ht32fxxxx.s) before branching to application main.</span>
<a name="l00081"></a>00081 <span class="comment">  *       To reconfigure the default setting of SystemInit() function, refer to</span>
<a name="l00082"></a>00082 <span class="comment">  *       system_ht32fxxxx.c file</span>
<a name="l00083"></a>00083 <span class="comment">  * @details Main program as following:</span>
<a name="l00084"></a>00084 <span class="comment">  *   - Enable RTC PCLK and waits until it can be accessed.</span>
<a name="l00085"></a>00085 <span class="comment">  *     The RTC is located in the Backup Domain. And the isolation is enabled when backup domain</span>
<a name="l00086"></a>00086 <span class="comment">  *     reset. Therefore you have to disable isolation via PWRCU_CheckReadyAccessed() function.</span>
<a name="l00087"></a>00087 <span class="comment">  *   - Initizlize LED1.</span>
<a name="l00088"></a>00088 <span class="comment">  *   - Configures USART: 115200 8-N-1</span>
<a name="l00089"></a>00089 <span class="comment">  *   - Enable NVIC RTC interrupt.</span>
<a name="l00090"></a>00090 <span class="comment">  *   - Check the Backup Domain reset flag.</span>
<a name="l00091"></a>00091 <span class="comment">  *     Print &quot;Power On Reset occurred!&quot; when the first time this program is executed.</span>
<a name="l00092"></a>00092 <span class="comment">  *   - Check the PWRCU_BAKREG_0 register.</span>
<a name="l00093"></a>00093 <span class="comment">  *     - If PWRCU_BAKREG_0 register value is not correct or not yet programmed.</span>
<a name="l00094"></a>00094 <span class="comment">  *       (when the first time the program is executed)</span>
<a name="l00095"></a>00095 <span class="comment">  *       - RTC Configuration via RTC_Configuration function.</span>
<a name="l00096"></a>00096 <span class="comment">  *       - Initialize the time values entred by the user on the Hyperterminal via AP_Time_Init() function</span>
<a name="l00097"></a>00097 <span class="comment">  *         or set by software directly.</span>
<a name="l00098"></a>00098 <span class="comment">  *       - Adjust time with 2014.1.1 00:00:00 and then store the sum of second to PWRCU_BAKREG_1 register.</span>
<a name="l00099"></a>00099 <span class="comment">  *         That is done through AP_Time_Adjust() function.</span>
<a name="l00100"></a>00100 <span class="comment">  *       - Enable RTC.</span>
<a name="l00101"></a>00101 <span class="comment">  *       - Write 0xAA55A5A5 to PWRCU_BAKREG_0 register.</span>
<a name="l00102"></a>00102 <span class="comment">  *     - If PWRCU_BAKREG_0 register value is correct.</span>
<a name="l00103"></a>00103 <span class="comment">  *       It means that the RTC had already configured.</span>
<a name="l00104"></a>00104 <span class="comment">  *   - Display the current time via AP_Time_Show() function.</span>
<a name="l00105"></a>00105 <span class="comment">  *     - Current time is sum of the RTC counter value and the init time stored in PWRCU_BAKREG_1 register.</span>
<a name="l00106"></a>00106 <span class="comment">  *       That is done through AP_Time_Count() function.</span>
<a name="l00107"></a>00107 <span class="comment">  ***********************************************************************************************************/</span>
<a name="l00108"></a><a class="code" href="group___calendar___backup_domain.html#ga840291bc02cba5474a4cb46a9b9566fe">00108</a> <span class="keywordtype">int</span> <a class="code" href="group___analog_watchdog.html#ga840291bc02cba5474a4cb46a9b9566fe" title="Main program.">main</a>(<span class="keywordtype">void</span>)
<a name="l00109"></a>00109 {
<a name="l00110"></a>00110   <span class="comment">/* Enable Backup Domain PCLK and waits until it can be accessed                                           */</span>
<a name="l00111"></a>00111   <a class="code" href="union_c_k_c_u___perip_clock_config___type_def.html" title="Definition of initial structure of peripheral clock control.">CKCU_PeripClockConfig_TypeDef</a> CKCUClock = {{0}};
<a name="l00112"></a>00112   CKCUClock.<a class="code" href="union_c_k_c_u___perip_clock_config___type_def.html#a358489ae0018064d2a4edc5121e0f1c3">Bit</a>.<a class="code" href="union_c_k_c_u___perip_clock_config___type_def.html#a8907499f06700f64b74243b6cf78ebe6">BKP</a>        = 1;
<a name="l00113"></a>00113   <a class="code" href="group___c_k_c_u___exported___functions.html#ga835dfc218f905e4582b9bec9c267283d" title="Enable or Disable the peripheral clock.">CKCU_PeripClockConfig</a>(CKCUClock, <a class="code" href="group___exported___types.html#ggac03f53915dd13820e0dfd3b3c93bed17a7d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>);
<a name="l00114"></a>00114   <span class="keywordflow">if</span> (<a class="code" href="group___p_w_r_c_u___exported___functions.html#ga68bfca0bb60a6dc3dbac264aa222012d" title="Waits, until the PWRCU can be accessed.">PWRCU_CheckReadyAccessed</a>() != <a class="code" href="group___p_w_r_c_u___exported___types.html#gga8f27e4710b96d0b4d71cf41c17909690ade12e993dd97e4a669f9365680542972">PWRCU_OK</a>)
<a name="l00115"></a>00115   {
<a name="l00116"></a>00116     <span class="keywordflow">while</span> (1);
<a name="l00117"></a>00117   }
<a name="l00118"></a>00118 
<a name="l00119"></a>00119   <span class="comment">/* Initialize LED1                                                                                        */</span>
<a name="l00120"></a>00120   <a class="code" href="group___b_m18_b367_a___d_v_b___exported___functions.html#ga6a6a4913a48943f5bd90c558dd5649ad" title="Configures LED GPIO.">HT32F_DVB_LEDInit</a>(<a class="code" href="group___h_t32_f67233___s_k___l_e_d.html#ggafe8c18865102c83d3cf627fa73e9dc81a9ecebd515165c816dc203fbd90d18438">HT_LED1</a>);
<a name="l00121"></a>00121 
<a name="l00122"></a>00122   <a class="code" href="group___r_e_t_a_r_g_e_t___exported___functions.html#ga7603aa9609b0cd9dc18657d82efdc1b6">RETARGET_Configuration</a>();           <span class="comment">/* Retarget Related configuration                                     */</span>
<a name="l00123"></a>00123 
<a name="l00124"></a>00124   <span class="comment">/* NVIC configuration                                                                                     */</span>
<a name="l00125"></a>00125   NVIC_EnableIRQ(<a class="code" href="group___configuration__for___interrupt___number.html#gga666eb0caeb12ec0e281415592ae89083adcc0f2770f7f57f75fac3d8bcac0e858">RTC_IRQn</a>);
<a name="l00126"></a>00126 
<a name="l00127"></a>00127   <span class="comment">/* Check the Power On Reset flag is set or not                                                            */</span>
<a name="l00128"></a>00128   <span class="keywordflow">if</span> (<a class="code" href="group___p_w_r_c_u___exported___functions.html#gaff42446cb96d2e10dc9a0987521f5344" title="Return the flags of PWRCU.">PWRCU_GetFlagStatus</a>() == <a class="code" href="group___p_w_r_c_u___exported___constants.html#gacb1a2b52b247e83eefda1ccd26ebac36">PWRCU_FLAG_PWRPOR</a>)
<a name="l00129"></a>00129   {
<a name="l00130"></a>00130     <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;\r\nPower On Reset occurred!\r\n&quot;</span>);
<a name="l00131"></a>00131   }
<a name="l00132"></a>00132 
<a name="l00133"></a>00133   <span class="keywordflow">if</span> (<a class="code" href="group___p_w_r_c_u___exported___functions.html#gadaa73bcb26702272e1605ecb53401b91" title="Return the value of specified backup register.">PWRCU_ReadBackupRegister</a>((<a class="code" href="group___p_w_r_c_u___exported___types.html#ga6f680fd5244f3ee2c30482f9b657c80a" title="Backup register selection.">PWRCU_BAKREG_Enum</a>) <a class="code" href="group___calendar___backup_domain.html#ga1beeae6dea36793f4e6068b24bd13ac1">PWRCU_BAKREG_0_RTC_KEY</a>) != 0xAA55A5A5)
<a name="l00134"></a>00134   {
<a name="l00135"></a>00135     <span class="comment">/* Backup data register value is not correct or not yet programmed</span>
<a name="l00136"></a>00136 <span class="comment">     (when the first time the program is executed) */</span>
<a name="l00137"></a>00137 
<a name="l00138"></a>00138     <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;\r\nRTC not yet configured!\r\n&quot;</span>);
<a name="l00139"></a>00139 
<a name="l00140"></a>00140     <span class="comment">/* RTC Configuration                                                                                    */</span>
<a name="l00141"></a>00141     <a class="code" href="group___backup_data.html#ga539951c46341882b44b63c9f1969c1a5" title="Configures the RTC.">RTC_Configuration</a>();
<a name="l00142"></a>00142 
<a name="l00143"></a>00143     <span class="comment">/* Initialize the time values entred by the user on the COM1 (using Hyperterminal) or software settings */</span>
<a name="l00144"></a>00144 <span class="preprocessor">    #if 1</span>
<a name="l00145"></a>00145 <span class="preprocessor"></span>    <a class="code" href="group___calendar___backup_domain.html#gaf74b118a6ac9a5cbab619b3b3376880c" title="Initialize time by values entered on the Hyperterminal.">AP_Time_Init</a>(&amp;DateTime);
<a name="l00146"></a>00146 <span class="preprocessor">    #else</span>
<a name="l00147"></a>00147 <span class="preprocessor"></span>    DateTime.<a class="code" href="struct_time___t.html#af1038645264576b52b7646bd82dda585">year</a>   = 2014;
<a name="l00148"></a>00148     DateTime.<a class="code" href="struct_time___t.html#aba697bf3a54c4c7e1515a794ebde0a52">month</a>  = 1;
<a name="l00149"></a>00149     DateTime.<a class="code" href="struct_time___t.html#a1c3106686234730294094e8ae38a9971">day</a>    = 1;
<a name="l00150"></a>00150     DateTime.<a class="code" href="struct_time___t.html#aeb6d0d33282a3ff4574b25a63e36e214">hour</a>   = 0;
<a name="l00151"></a>00151     DateTime.<a class="code" href="struct_time___t.html#a507c5c7cb265428d8f811e8b3093a63c">minute</a> = 0;
<a name="l00152"></a>00152     DateTime.<a class="code" href="struct_time___t.html#abf8aa84883a37fa56e03e794ebb37acb">second</a> = 0;
<a name="l00153"></a>00153 <span class="preprocessor">    #endif</span>
<a name="l00154"></a>00154 <span class="preprocessor"></span>
<a name="l00155"></a>00155     <span class="comment">/* Adjust time and store into RTC counter                                                               */</span>
<a name="l00156"></a>00156     <span class="keywordflow">if</span> (!<a class="code" href="group___calendar___backup_domain.html#gad4d6b5eb52e2a55c51920419f4d8f420" title="Adjust time according to 2014.1.1 00:00:00 and store the sum of second to PWRCU_BAKREG_1 register...">AP_Time_Adjust</a>(&amp;DateTime))
<a name="l00157"></a>00157     {
<a name="l00158"></a>00158       <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;\r\nAdjust time error!\r\n&quot;</span>);
<a name="l00159"></a>00159       <span class="keywordflow">while</span> (1);
<a name="l00160"></a>00160     }
<a name="l00161"></a>00161 
<a name="l00162"></a>00162     <span class="comment">/* Enable RTC                                                                                           */</span>
<a name="l00163"></a>00163     <a class="code" href="group___r_t_c___exported___functions.html#ga007f9250de642952cec9380a23f0d38c" title="Enable or Disable the RTC timer.">RTC_Cmd</a>(<a class="code" href="group___exported___types.html#ggac03f53915dd13820e0dfd3b3c93bed17a7d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>);
<a name="l00164"></a>00164 
<a name="l00165"></a>00165     <a class="code" href="group___p_w_r_c_u___exported___functions.html#gac5462941edb995910d64b48c3dbd7e57" title="Write the DATA to specified backup register.">PWRCU_WriteBackupRegister</a>((<a class="code" href="group___p_w_r_c_u___exported___types.html#ga6f680fd5244f3ee2c30482f9b657c80a" title="Backup register selection.">PWRCU_BAKREG_Enum</a>) PWRCU_BAKREG_0_RTC_KEY, 0xAA55A5A5);
<a name="l00166"></a>00166   }
<a name="l00167"></a>00167   <span class="keywordflow">else</span>
<a name="l00168"></a>00168   {
<a name="l00169"></a>00169     <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;\r\nNo need to configure RTC!\r\n&quot;</span>);
<a name="l00170"></a>00170   }
<a name="l00171"></a>00171 
<a name="l00172"></a>00172   <span class="keywordflow">while</span> (1)
<a name="l00173"></a>00173   {
<a name="l00174"></a>00174     <span class="comment">/* If 1s has passed                                                                                     */</span>
<a name="l00175"></a>00175     <span class="keywordflow">if</span> (<a class="code" href="group___calendar___backup_domain.html#gaeb06464010a55d904e0d3e22bd193c8c">CK_SECOND_Flag</a>)
<a name="l00176"></a>00176     {
<a name="l00177"></a>00177       <a class="code" href="group___calendar___backup_domain.html#gaeb06464010a55d904e0d3e22bd193c8c">CK_SECOND_Flag</a> = 0;
<a name="l00178"></a>00178 
<a name="l00179"></a>00179       <span class="comment">/*</span>
<a name="l00180"></a>00180 <span class="comment">        Display current time.</span>
<a name="l00181"></a>00181 <span class="comment">        Current time is sum of the RTC counter value and the init time.</span>
<a name="l00182"></a>00182 <span class="comment">      */</span>
<a name="l00183"></a>00183       <a class="code" href="group___calendar___backup_domain.html#gab509ba66b6a9d5433ef2973a454ef91a" title="Shows the current time YYYY.MM.DD HH:MM:SS on the Hyperterminal.">AP_Time_Show</a>();
<a name="l00184"></a>00184     }
<a name="l00185"></a>00185   }
<a name="l00186"></a>00186 }
<a name="l00187"></a>00187 
<a name="l00188"></a>00188 <span class="comment">/*********************************************************************************************************/</span><span class="comment">/**</span>
<a name="l00189"></a>00189 <span class="comment">  * @brief  Initialize time by values entered on the Hyperterminal.</span>
<a name="l00190"></a>00190 <span class="comment">    * @param  InitTime: pointer to Time_T structure that will store the configuration values.</span>
<a name="l00191"></a>00191 <span class="comment">  * @retval None</span>
<a name="l00192"></a>00192 <span class="comment">  ***********************************************************************************************************/</span>
<a name="l00193"></a><a class="code" href="group___calendar___backup_domain.html#gaf74b118a6ac9a5cbab619b3b3376880c">00193</a> <span class="keywordtype">void</span> <a class="code" href="group___calendar___backup_domain.html#gaf74b118a6ac9a5cbab619b3b3376880c" title="Initialize time by values entered on the Hyperterminal.">AP_Time_Init</a>(<a class="code" href="struct_time___t.html">Time_T</a>* InitTime)
<a name="l00194"></a>00194 {
<a name="l00195"></a>00195   <span class="keywordtype">bool</span> leapyear;
<a name="l00196"></a>00196   <a class="code" href="group___exported___types.html#ga10e94b422ef0c20dcdec20d31a1f5049">u32</a> val;
<a name="l00197"></a>00197 
<a name="l00198"></a>00198   <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;\r\n&quot;</span>);
<a name="l00199"></a>00199   <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;------------------------------\r\n&quot;</span>);
<a name="l00200"></a>00200   <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;Time Settings\r\n&quot;</span>);
<a name="l00201"></a>00201 
<a name="l00202"></a>00202   <span class="comment">/* Year setting range: 2014 ~ 2050                                                                        */</span>
<a name="l00203"></a>00203   <span class="keywordflow">while</span> (1)
<a name="l00204"></a>00204   {
<a name="l00205"></a>00205     <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;Year  : &quot;</span>);
<a name="l00206"></a>00206     scanf(<span class="stringliteral">&quot;%d&quot;</span>, &amp;val);
<a name="l00207"></a>00207     <span class="keywordflow">if</span> ((val &gt;= 2014) &amp;&amp; (val &lt;= 2050))
<a name="l00208"></a>00208     {
<a name="l00209"></a>00209         InitTime-&gt;<a class="code" href="struct_time___t.html#af1038645264576b52b7646bd82dda585">year</a> = val;
<a name="l00210"></a>00210         <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;%d\r\n&quot;</span>, InitTime-&gt;<a class="code" href="struct_time___t.html#af1038645264576b52b7646bd82dda585">year</a>);
<a name="l00211"></a>00211         <span class="keywordflow">break</span>;
<a name="l00212"></a>00212     }
<a name="l00213"></a>00213     <span class="keywordflow">else</span>
<a name="l00214"></a>00214     {
<a name="l00215"></a>00215         <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;Invalid\r\n&quot;</span>);
<a name="l00216"></a>00216     }
<a name="l00217"></a>00217   }
<a name="l00218"></a>00218 
<a name="l00219"></a>00219   <span class="comment">/* Month setting range: 1 ~ 12                                                                            */</span>
<a name="l00220"></a>00220   <span class="keywordflow">while</span> (1)
<a name="l00221"></a>00221   {
<a name="l00222"></a>00222     <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;Month : &quot;</span>);
<a name="l00223"></a>00223     scanf(<span class="stringliteral">&quot;%d&quot;</span>, &amp;val);
<a name="l00224"></a>00224     <span class="keywordflow">if</span> ((val &gt; 0) &amp;&amp; (val &lt;= 12) )
<a name="l00225"></a>00225     {
<a name="l00226"></a>00226       InitTime-&gt;<a class="code" href="struct_time___t.html#aba697bf3a54c4c7e1515a794ebde0a52">month</a> = val;
<a name="l00227"></a>00227       <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;%d\r\n&quot;</span>, InitTime-&gt;<a class="code" href="struct_time___t.html#aba697bf3a54c4c7e1515a794ebde0a52">month</a>);
<a name="l00228"></a>00228       <span class="keywordflow">break</span>;
<a name="l00229"></a>00229     }
<a name="l00230"></a>00230     <span class="keywordflow">else</span>
<a name="l00231"></a>00231     {
<a name="l00232"></a>00232       <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;Invalid\r\n&quot;</span>);
<a name="l00233"></a>00233     }
<a name="l00234"></a>00234   }
<a name="l00235"></a>00235 
<a name="l00236"></a>00236   <span class="comment">/* Day setting range: 1 ~ 31                                                                              */</span>
<a name="l00237"></a>00237   leapyear = <a class="code" href="group___calendar___backup_domain.html#ga2448b5456c2e0177377dc089ff265da2" title="Determine if a year is a leap year or not.">IsLeapYear</a>(InitTime-&gt;<a class="code" href="struct_time___t.html#af1038645264576b52b7646bd82dda585">year</a>);
<a name="l00238"></a>00238   <span class="keywordflow">while</span> (1)
<a name="l00239"></a>00239   {
<a name="l00240"></a>00240     <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;Day   : &quot;</span>);
<a name="l00241"></a>00241     scanf(<span class="stringliteral">&quot;%d&quot;</span>, &amp;val);
<a name="l00242"></a>00242     <span class="keywordflow">if</span> ((val &gt; 0) &amp;&amp; (val &lt;= <a class="code" href="group___calendar___backup_domain.html#ga852d47279e9b6a0223f6e2a1a10dc980">Day_Per_Month</a>[InitTime-&gt;<a class="code" href="struct_time___t.html#aba697bf3a54c4c7e1515a794ebde0a52">month</a>]) )  <span class="comment">// Feb, 1~28</span>
<a name="l00243"></a>00243     {
<a name="l00244"></a>00244       InitTime-&gt;<a class="code" href="struct_time___t.html#a1c3106686234730294094e8ae38a9971">day</a> = val;
<a name="l00245"></a>00245       <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;%d\r\n&quot;</span>, InitTime-&gt;<a class="code" href="struct_time___t.html#a1c3106686234730294094e8ae38a9971">day</a>);
<a name="l00246"></a>00246       <span class="keywordflow">break</span>;
<a name="l00247"></a>00247     }
<a name="l00248"></a>00248     <span class="keywordflow">else</span>
<a name="l00249"></a>00249     {
<a name="l00250"></a>00250       <span class="keywordflow">if</span> ((leapyear == <a class="code" href="group___exported___types.html#ggaf6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>) &amp;&amp; (InitTime-&gt;<a class="code" href="struct_time___t.html#aba697bf3a54c4c7e1515a794ebde0a52">month</a> == 2) )
<a name="l00251"></a>00251       {
<a name="l00252"></a>00252         <span class="keywordflow">if</span> (val == 29)
<a name="l00253"></a>00253         {
<a name="l00254"></a>00254           InitTime-&gt;<a class="code" href="struct_time___t.html#a1c3106686234730294094e8ae38a9971">day</a> = val;
<a name="l00255"></a>00255           <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;%d\r\n&quot;</span>, InitTime-&gt;<a class="code" href="struct_time___t.html#a1c3106686234730294094e8ae38a9971">day</a>);
<a name="l00256"></a>00256           <span class="keywordflow">break</span>;
<a name="l00257"></a>00257         }
<a name="l00258"></a>00258         <span class="keywordflow">else</span>
<a name="l00259"></a>00259         {
<a name="l00260"></a>00260           <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;Invalid\r\n&quot;</span>);
<a name="l00261"></a>00261         }
<a name="l00262"></a>00262       }
<a name="l00263"></a>00263       <span class="keywordflow">else</span>
<a name="l00264"></a>00264       {
<a name="l00265"></a>00265         <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;Invalid\r\n&quot;</span>);
<a name="l00266"></a>00266       }
<a name="l00267"></a>00267     }
<a name="l00268"></a>00268   }
<a name="l00269"></a>00269 
<a name="l00270"></a>00270   <span class="comment">/* Hour setting range: 0 ~ 23                                                                             */</span>
<a name="l00271"></a>00271   <span class="keywordflow">while</span> (1)
<a name="l00272"></a>00272   {
<a name="l00273"></a>00273     <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;Hour  : &quot;</span>);
<a name="l00274"></a>00274     scanf(<span class="stringliteral">&quot;%d&quot;</span>, &amp;val);
<a name="l00275"></a>00275     <span class="keywordflow">if</span> (val &lt;= 23)
<a name="l00276"></a>00276     {
<a name="l00277"></a>00277       InitTime-&gt;<a class="code" href="struct_time___t.html#aeb6d0d33282a3ff4574b25a63e36e214">hour</a> = val;
<a name="l00278"></a>00278       <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;%d\r\n&quot;</span>, InitTime-&gt;<a class="code" href="struct_time___t.html#aeb6d0d33282a3ff4574b25a63e36e214">hour</a>);
<a name="l00279"></a>00279       <span class="keywordflow">break</span>;
<a name="l00280"></a>00280     }
<a name="l00281"></a>00281     <span class="keywordflow">else</span>
<a name="l00282"></a>00282     {
<a name="l00283"></a>00283       <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;Invalid\r\n&quot;</span>);
<a name="l00284"></a>00284     }
<a name="l00285"></a>00285   }
<a name="l00286"></a>00286 
<a name="l00287"></a>00287   <span class="comment">/* Minute setting range: 0 ~ 59                                                                           */</span>
<a name="l00288"></a>00288   <span class="keywordflow">while</span> (1)
<a name="l00289"></a>00289   {
<a name="l00290"></a>00290     <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;Minute: &quot;</span>);
<a name="l00291"></a>00291     scanf(<span class="stringliteral">&quot;%d&quot;</span>, &amp;val);
<a name="l00292"></a>00292     <span class="keywordflow">if</span> (val &lt;= 59)
<a name="l00293"></a>00293     {
<a name="l00294"></a>00294       InitTime-&gt;<a class="code" href="struct_time___t.html#a507c5c7cb265428d8f811e8b3093a63c">minute</a> = val;
<a name="l00295"></a>00295       <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;%d\r\n&quot;</span>, InitTime-&gt;<a class="code" href="struct_time___t.html#a507c5c7cb265428d8f811e8b3093a63c">minute</a>);
<a name="l00296"></a>00296       <span class="keywordflow">break</span>;
<a name="l00297"></a>00297     }
<a name="l00298"></a>00298     <span class="keywordflow">else</span>
<a name="l00299"></a>00299     {
<a name="l00300"></a>00300       <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;Invalid\r\n&quot;</span>);
<a name="l00301"></a>00301     }
<a name="l00302"></a>00302   }
<a name="l00303"></a>00303 
<a name="l00304"></a>00304   <span class="comment">/* Second setting range: 0 ~ 59                                                                           */</span>
<a name="l00305"></a>00305   <span class="keywordflow">while</span> (1)
<a name="l00306"></a>00306   {
<a name="l00307"></a>00307     <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;Second: &quot;</span>);
<a name="l00308"></a>00308     scanf(<span class="stringliteral">&quot;%d&quot;</span>, &amp;val);
<a name="l00309"></a>00309     <span class="keywordflow">if</span> (val &lt;= 59)
<a name="l00310"></a>00310     {
<a name="l00311"></a>00311       InitTime-&gt;<a class="code" href="struct_time___t.html#abf8aa84883a37fa56e03e794ebb37acb">second</a> = val;
<a name="l00312"></a>00312       <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;%d\r\n&quot;</span>, InitTime-&gt;<a class="code" href="struct_time___t.html#abf8aa84883a37fa56e03e794ebb37acb">second</a>);
<a name="l00313"></a>00313       <span class="keywordflow">break</span>;
<a name="l00314"></a>00314     }
<a name="l00315"></a>00315     <span class="keywordflow">else</span>
<a name="l00316"></a>00316     {
<a name="l00317"></a>00317       <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;Invalid\r\n&quot;</span>);
<a name="l00318"></a>00318     }
<a name="l00319"></a>00319   }
<a name="l00320"></a>00320   <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;\r\n&quot;</span>);
<a name="l00321"></a>00321 }
<a name="l00322"></a>00322 
<a name="l00323"></a>00323 <span class="comment">/*********************************************************************************************************/</span><span class="comment">/**</span>
<a name="l00324"></a>00324 <span class="comment">  * @brief  Adjust time according to 2014.1.1 00:00:00 and store the sum of second to PWRCU_BAKREG_1 register.</span>
<a name="l00325"></a>00325 <span class="comment">  * @param  AdjustTime: pointer to Time_T structure that contains the previously configuration values.</span>
<a name="l00326"></a>00326 <span class="comment">  * @retval The status of the time adjustment, 0 (Fail) or 1 (Success)</span>
<a name="l00327"></a>00327 <span class="comment">  ***********************************************************************************************************/</span>
<a name="l00328"></a><a class="code" href="group___calendar___backup_domain.html#gad4d6b5eb52e2a55c51920419f4d8f420">00328</a> <a class="code" href="group___exported___types.html#gaed742c436da53c1080638ce6ef7d13de">u8</a> <a class="code" href="group___calendar___backup_domain.html#gad4d6b5eb52e2a55c51920419f4d8f420" title="Adjust time according to 2014.1.1 00:00:00 and store the sum of second to PWRCU_BAKREG_1 register...">AP_Time_Adjust</a>(<a class="code" href="struct_time___t.html">Time_T</a>* AdjustTime)
<a name="l00329"></a>00329 {
<a name="l00330"></a>00330   <a class="code" href="group___exported___types.html#ga10e94b422ef0c20dcdec20d31a1f5049">u32</a> <a class="code" href="group___c_r_c__16.html#gabf0a803c9f19fa09bc230ae54a46bb4c">i</a>, temp, secsum = 0;
<a name="l00331"></a>00331 
<a name="l00332"></a>00332   temp = AdjustTime-&gt;<a class="code" href="struct_time___t.html#af1038645264576b52b7646bd82dda585">year</a> - 1;
<a name="l00333"></a>00333   <span class="keywordflow">for</span> (i = 0; i &lt; (AdjustTime-&gt;<a class="code" href="struct_time___t.html#af1038645264576b52b7646bd82dda585">year</a> - 2014); i++)
<a name="l00334"></a>00334   {
<a name="l00335"></a>00335     <span class="keywordflow">if</span> (<a class="code" href="group___calendar___backup_domain.html#ga2448b5456c2e0177377dc089ff265da2" title="Determine if a year is a leap year or not.">IsLeapYear</a>(temp--) == <a class="code" href="group___exported___types.html#ggaf6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>)
<a name="l00336"></a>00336     {
<a name="l00337"></a>00337       secsum += (366 * 86400);
<a name="l00338"></a>00338     }
<a name="l00339"></a>00339     <span class="keywordflow">else</span>
<a name="l00340"></a>00340     {
<a name="l00341"></a>00341       secsum += (365 * 86400);
<a name="l00342"></a>00342     }
<a name="l00343"></a>00343   }
<a name="l00344"></a>00344 
<a name="l00345"></a>00345   temp = 1;
<a name="l00346"></a>00346   <span class="keywordflow">for</span> (i = 0; i &lt; (AdjustTime-&gt;<a class="code" href="struct_time___t.html#aba697bf3a54c4c7e1515a794ebde0a52">month</a> - 1); i++)
<a name="l00347"></a>00347   {
<a name="l00348"></a>00348     <span class="keywordflow">if</span> (temp == 2)
<a name="l00349"></a>00349     {
<a name="l00350"></a>00350       <span class="keywordflow">if</span> (<a class="code" href="group___calendar___backup_domain.html#ga2448b5456c2e0177377dc089ff265da2" title="Determine if a year is a leap year or not.">IsLeapYear</a>(AdjustTime-&gt;<a class="code" href="struct_time___t.html#af1038645264576b52b7646bd82dda585">year</a>) == <a class="code" href="group___exported___types.html#ggaf6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>)
<a name="l00351"></a>00351         secsum += (29 * 86400);
<a name="l00352"></a>00352       <span class="keywordflow">else</span>
<a name="l00353"></a>00353         secsum += (28 * 86400);
<a name="l00354"></a>00354     }
<a name="l00355"></a>00355     <span class="keywordflow">else</span>
<a name="l00356"></a>00356     {
<a name="l00357"></a>00357       secsum += (<a class="code" href="group___calendar___backup_domain.html#ga852d47279e9b6a0223f6e2a1a10dc980">Day_Per_Month</a>[temp] * 86400);
<a name="l00358"></a>00358     }
<a name="l00359"></a>00359     temp++;
<a name="l00360"></a>00360   }
<a name="l00361"></a>00361 
<a name="l00362"></a>00362   secsum += ((AdjustTime-&gt;<a class="code" href="struct_time___t.html#a1c3106686234730294094e8ae38a9971">day</a> - 1) * 86400);
<a name="l00363"></a>00363   secsum += (AdjustTime-&gt;<a class="code" href="struct_time___t.html#aeb6d0d33282a3ff4574b25a63e36e214">hour</a> * 3600);
<a name="l00364"></a>00364   secsum += (AdjustTime-&gt;<a class="code" href="struct_time___t.html#a507c5c7cb265428d8f811e8b3093a63c">minute</a> * 60);
<a name="l00365"></a>00365   secsum += (AdjustTime-&gt;<a class="code" href="struct_time___t.html#abf8aa84883a37fa56e03e794ebb37acb">second</a>);
<a name="l00366"></a>00366 
<a name="l00367"></a>00367   <a class="code" href="group___p_w_r_c_u___exported___functions.html#gac5462941edb995910d64b48c3dbd7e57" title="Write the DATA to specified backup register.">PWRCU_WriteBackupRegister</a>((<a class="code" href="group___p_w_r_c_u___exported___types.html#ga6f680fd5244f3ee2c30482f9b657c80a" title="Backup register selection.">PWRCU_BAKREG_Enum</a>) <a class="code" href="group___calendar___backup_domain.html#ga2cf6e82f20f01f4a57a5835b2740215f">PWRCU_BAKREG_1_RTC_SECOND</a>, secsum);
<a name="l00368"></a>00368   <span class="keywordflow">if</span> (<a class="code" href="group___p_w_r_c_u___exported___functions.html#gadaa73bcb26702272e1605ecb53401b91" title="Return the value of specified backup register.">PWRCU_ReadBackupRegister</a>((<a class="code" href="group___p_w_r_c_u___exported___types.html#ga6f680fd5244f3ee2c30482f9b657c80a" title="Backup register selection.">PWRCU_BAKREG_Enum</a>) PWRCU_BAKREG_1_RTC_SECOND) != secsum)
<a name="l00369"></a>00369   {
<a name="l00370"></a>00370     <span class="keywordflow">return</span> 0;
<a name="l00371"></a>00371   }
<a name="l00372"></a>00372 
<a name="l00373"></a>00373   <span class="keywordflow">return</span> 1;
<a name="l00374"></a>00374 }
<a name="l00375"></a>00375 
<a name="l00376"></a>00376 <span class="comment">/*********************************************************************************************************/</span><span class="comment">/**</span>
<a name="l00377"></a>00377 <span class="comment">  * @brief  Shows the current time YYYY.MM.DD HH:MM:SS on the Hyperterminal.</span>
<a name="l00378"></a>00378 <span class="comment">  * @retval None</span>
<a name="l00379"></a>00379 <span class="comment">  ***********************************************************************************************************/</span>
<a name="l00380"></a><a class="code" href="group___calendar___backup_domain.html#gab509ba66b6a9d5433ef2973a454ef91a">00380</a> <span class="keywordtype">void</span> <a class="code" href="group___calendar___backup_domain.html#gab509ba66b6a9d5433ef2973a454ef91a" title="Shows the current time YYYY.MM.DD HH:MM:SS on the Hyperterminal.">AP_Time_Show</a>(<span class="keywordtype">void</span>)
<a name="l00381"></a>00381 {
<a name="l00382"></a>00382   <a class="code" href="group___calendar___backup_domain.html#ga6534896ff2b8c084689cf5c717fb7f0b" title="Calculate the current time.">AP_Time_Count</a>(&amp;CurTime);
<a name="l00383"></a>00383 
<a name="l00384"></a>00384   <a class="code" href="group___p_r_i_n_t_f___exported___functions.html#ga6a03bad708c7b4ea2366bc86fb7a7958" title="Print function.">printf</a>(<span class="stringliteral">&quot;\r%04d.%02d.%02d %02d:%02d:%02d&quot;</span>,
<a name="l00385"></a>00385                   CurTime.<a class="code" href="struct_time___t.html#af1038645264576b52b7646bd82dda585">year</a>,
<a name="l00386"></a>00386                   CurTime.<a class="code" href="struct_time___t.html#aba697bf3a54c4c7e1515a794ebde0a52">month</a>,
<a name="l00387"></a>00387                   CurTime.<a class="code" href="struct_time___t.html#a1c3106686234730294094e8ae38a9971">day</a>,
<a name="l00388"></a>00388                   CurTime.<a class="code" href="struct_time___t.html#aeb6d0d33282a3ff4574b25a63e36e214">hour</a>,
<a name="l00389"></a>00389                   CurTime.<a class="code" href="struct_time___t.html#a507c5c7cb265428d8f811e8b3093a63c">minute</a>,
<a name="l00390"></a>00390                   CurTime.<a class="code" href="struct_time___t.html#abf8aa84883a37fa56e03e794ebb37acb">second</a>);
<a name="l00391"></a>00391 }
<a name="l00392"></a>00392 
<a name="l00393"></a>00393 <span class="comment">/*********************************************************************************************************/</span><span class="comment">/**</span>
<a name="l00394"></a>00394 <span class="comment">  * @brief  Calculate the current time.</span>
<a name="l00395"></a>00395 <span class="comment">  * @param  CurrentTime: pointer to Time_T structure that contains the current time values.</span>
<a name="l00396"></a>00396 <span class="comment">  * @retval The status of the time calculation, 0 (Fail) or 1 (Success)</span>
<a name="l00397"></a>00397 <span class="comment">  ***********************************************************************************************************/</span>
<a name="l00398"></a><a class="code" href="group___calendar___backup_domain.html#ga6534896ff2b8c084689cf5c717fb7f0b">00398</a> <a class="code" href="group___exported___types.html#gaed742c436da53c1080638ce6ef7d13de">u8</a> <a class="code" href="group___calendar___backup_domain.html#ga6534896ff2b8c084689cf5c717fb7f0b" title="Calculate the current time.">AP_Time_Count</a>(<a class="code" href="struct_time___t.html">Time_T</a>* CurrentTime)
<a name="l00399"></a>00399 {
<a name="l00400"></a>00400   <a class="code" href="group___exported___types.html#ga10e94b422ef0c20dcdec20d31a1f5049">u32</a> <a class="code" href="group___c_r_c__16.html#gabf0a803c9f19fa09bc230ae54a46bb4c">i</a>, secsum = 0, temp = 0;
<a name="l00401"></a>00401 
<a name="l00402"></a>00402   secsum = <a class="code" href="group___p_w_r_c_u___exported___functions.html#gadaa73bcb26702272e1605ecb53401b91" title="Return the value of specified backup register.">PWRCU_ReadBackupRegister</a>((<a class="code" href="group___p_w_r_c_u___exported___types.html#ga6f680fd5244f3ee2c30482f9b657c80a" title="Backup register selection.">PWRCU_BAKREG_Enum</a>) <a class="code" href="group___calendar___backup_domain.html#ga2cf6e82f20f01f4a57a5835b2740215f">PWRCU_BAKREG_1_RTC_SECOND</a>);
<a name="l00403"></a>00403   secsum += <a class="code" href="group___r_t_c___exported___functions.html#gad0ed150c22d59b3728550812c3cf7d02" title="Return the counter value.">RTC_GetCounter</a>();
<a name="l00404"></a>00404 
<a name="l00405"></a>00405   temp = 0;
<a name="l00406"></a>00406   <span class="keywordflow">while</span> (secsum &gt;= (365 * 86400))
<a name="l00407"></a>00407   {
<a name="l00408"></a>00408     <span class="keywordflow">if</span> (<a class="code" href="group___calendar___backup_domain.html#ga2448b5456c2e0177377dc089ff265da2" title="Determine if a year is a leap year or not.">IsLeapYear</a>(2014 + temp))
<a name="l00409"></a>00409     {
<a name="l00410"></a>00410       <span class="keywordflow">if</span> (secsum &gt;= (366 * 86400))
<a name="l00411"></a>00411       {
<a name="l00412"></a>00412         temp++;
<a name="l00413"></a>00413         secsum -= (366 * 86400);
<a name="l00414"></a>00414       }
<a name="l00415"></a>00415       <span class="keywordflow">else</span>
<a name="l00416"></a>00416       {
<a name="l00417"></a>00417         <span class="keywordflow">break</span>;
<a name="l00418"></a>00418       }
<a name="l00419"></a>00419     }
<a name="l00420"></a>00420     <span class="keywordflow">else</span>
<a name="l00421"></a>00421     {
<a name="l00422"></a>00422       temp++;
<a name="l00423"></a>00423       secsum -= (365 * 86400);
<a name="l00424"></a>00424     }
<a name="l00425"></a>00425   }
<a name="l00426"></a>00426   CurrentTime-&gt;<a class="code" href="struct_time___t.html#af1038645264576b52b7646bd82dda585">year</a> = 2014 + temp;
<a name="l00427"></a>00427 
<a name="l00428"></a>00428   <span class="keywordflow">for</span> (i = 1; i &lt;= 12; i++)
<a name="l00429"></a>00429   {
<a name="l00430"></a>00430     <span class="keywordflow">if</span> (secsum &gt;= (<a class="code" href="group___calendar___backup_domain.html#ga852d47279e9b6a0223f6e2a1a10dc980">Day_Per_Month</a>[i] * 86400))
<a name="l00431"></a>00431     {
<a name="l00432"></a>00432       <span class="keywordflow">if</span> (i == 2)  <span class="comment">// February</span>
<a name="l00433"></a>00433       {
<a name="l00434"></a>00434         <span class="keywordflow">if</span> (<a class="code" href="group___calendar___backup_domain.html#ga2448b5456c2e0177377dc089ff265da2" title="Determine if a year is a leap year or not.">IsLeapYear</a>(CurrentTime-&gt;<a class="code" href="struct_time___t.html#af1038645264576b52b7646bd82dda585">year</a>))
<a name="l00435"></a>00435         {
<a name="l00436"></a>00436           <span class="keywordflow">if</span> (secsum &gt;= (29 * 86400))
<a name="l00437"></a>00437             secsum -= (29 * 86400);
<a name="l00438"></a>00438           <span class="keywordflow">else</span>
<a name="l00439"></a>00439             <span class="keywordflow">break</span>;
<a name="l00440"></a>00440         }
<a name="l00441"></a>00441         <span class="keywordflow">else</span>
<a name="l00442"></a>00442         {
<a name="l00443"></a>00443           secsum -= (28 * 86400);
<a name="l00444"></a>00444         }
<a name="l00445"></a>00445       }
<a name="l00446"></a>00446       <span class="keywordflow">else</span>
<a name="l00447"></a>00447       {
<a name="l00448"></a>00448         secsum -= (<a class="code" href="group___calendar___backup_domain.html#ga852d47279e9b6a0223f6e2a1a10dc980">Day_Per_Month</a>[<a class="code" href="group___c_r_c__16.html#gabf0a803c9f19fa09bc230ae54a46bb4c">i</a>] * 86400);
<a name="l00449"></a>00449       }
<a name="l00450"></a>00450     }
<a name="l00451"></a>00451     <span class="keywordflow">else</span>
<a name="l00452"></a>00452     {
<a name="l00453"></a>00453       <span class="keywordflow">break</span>;
<a name="l00454"></a>00454     }
<a name="l00455"></a>00455   }
<a name="l00456"></a>00456   CurrentTime-&gt;<a class="code" href="struct_time___t.html#aba697bf3a54c4c7e1515a794ebde0a52">month</a> = <a class="code" href="group___c_r_c__16.html#gabf0a803c9f19fa09bc230ae54a46bb4c">i</a>;
<a name="l00457"></a>00457 
<a name="l00458"></a>00458   CurrentTime-&gt;<a class="code" href="struct_time___t.html#a1c3106686234730294094e8ae38a9971">day</a> = secsum / 86400 + 1;
<a name="l00459"></a>00459   secsum -= ((CurrentTime-&gt;<a class="code" href="struct_time___t.html#a1c3106686234730294094e8ae38a9971">day</a> - 1) * 86400);
<a name="l00460"></a>00460 
<a name="l00461"></a>00461   CurrentTime-&gt;<a class="code" href="struct_time___t.html#aeb6d0d33282a3ff4574b25a63e36e214">hour</a> = secsum / 3600;
<a name="l00462"></a>00462   CurrentTime-&gt;<a class="code" href="struct_time___t.html#a507c5c7cb265428d8f811e8b3093a63c">minute</a> = (secsum % 3600) / 60;
<a name="l00463"></a>00463   CurrentTime-&gt;<a class="code" href="struct_time___t.html#abf8aa84883a37fa56e03e794ebb37acb">second</a> = (secsum % 3600) % 60;
<a name="l00464"></a>00464 
<a name="l00465"></a>00465   <span class="keywordflow">return</span> 1;
<a name="l00466"></a>00466 }
<a name="l00467"></a>00467 
<a name="l00468"></a>00468 <span class="comment">/*********************************************************************************************************/</span><span class="comment">/**</span>
<a name="l00469"></a>00469 <span class="comment"> * @brief Configures RTC.</span>
<a name="l00470"></a>00470 <span class="comment"> * @retval None</span>
<a name="l00471"></a>00471 <span class="comment"> * @details RTC configuration as following:</span>
<a name="l00472"></a>00472 <span class="comment"> *  - S/W reset the Backup Domain.</span>
<a name="l00473"></a>00473 <span class="comment"> *  - Configure Low Speed External clock (LSE).</span>
<a name="l00474"></a>00474 <span class="comment"> *    - The LSE use fast startup mode. Shortly startup time but higher power consumption.</span>
<a name="l00475"></a>00475 <span class="comment"> *    - Enable the LSE. Waits till LSE is ready.</span>
<a name="l00476"></a>00476 <span class="comment"> *  - Configure RTC.</span>
<a name="l00477"></a>00477 <span class="comment"> *    - Select LSE as RTC Clock Source.</span>
<a name="l00478"></a>00478 <span class="comment"> *    - Enable the RTC Second interrupt.</span>
<a name="l00479"></a>00479 <span class="comment"> *    - RTC prescaler = 32768 to generate 1 second interrupt.</span>
<a name="l00480"></a>00480 <span class="comment"> ************************************************************************************************************/</span>
<a name="l00481"></a>00481 <span class="keywordtype">void</span> <a class="code" href="group___backup_data.html#ga539951c46341882b44b63c9f1969c1a5" title="Configures the RTC.">RTC_Configuration</a>(<span class="keywordtype">void</span>)
<a name="l00482"></a>00482 {
<a name="l00483"></a>00483   <span class="comment">/* Reset Backup Domain                                                                                    */</span>
<a name="l00484"></a>00484   <a class="code" href="group___p_w_r_c_u___exported___functions.html#ga413c0f21f701434486c3d91ecb126380" title="Deinitialize backup domain which contains PWRCU and RTC units.">PWRCU_DeInit</a>();
<a name="l00485"></a>00485 
<a name="l00486"></a>00486   <span class="comment">/* Configure Low Speed External clock (LSE)                                                               */</span>
<a name="l00487"></a>00487   <a class="code" href="group___r_t_c___exported___functions.html#ga6cfe3ee33ff502c0c24c80f77bc01cda" title="Select the LSE startup mode.">RTC_LSESMConfig</a>(<a class="code" href="group___r_t_c___exported___types.html#ggaa03daa6bfa40f0237185f80686a72ce5a1d8582192a1dbce377e4ae1469b6b297">RTC_LSESM_FAST</a>);
<a name="l00488"></a>00488   <a class="code" href="group___r_t_c___exported___functions.html#gaa4bec461b0e9f6e8ddc56d9be4ec255a" title="Enable or Disable the LSE clock.">RTC_LSECmd</a>(<a class="code" href="group___exported___types.html#ggac03f53915dd13820e0dfd3b3c93bed17a7d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>);
<a name="l00489"></a>00489   <span class="keywordflow">while</span> (<a class="code" href="group___c_k_c_u___exported___functions.html#ga23699cc1d8f3fce32ecb45650310bb90" title="Check whether the specific clock ready flag is set or not.">CKCU_GetClockReadyStatus</a>(CKCU_FLAG_LSERDY) == <a class="code" href="group___exported___types.html#gga89136caac2e14c55151f527ac02daaffa589b7d94a3d91d145720e2fed0eb3a05">RESET</a>);
<a name="l00490"></a>00490   <a class="code" href="group___r_t_c___exported___functions.html#ga0627e31eea00cc37c010fb13c7f038d3" title="Select the RTC timer clock source.">RTC_ClockSourceConfig</a>(<a class="code" href="group___r_t_c___exported___types.html#ggaf597d330e7531edfd9134da4af2f444ba06a95850068df78b25cdfc49ffa13308">RTC_SRC_LSE</a>);
<a name="l00491"></a>00491 
<a name="l00492"></a>00492   <a class="code" href="group___r_t_c___exported___functions.html#gae245827afa438ca23526a9c27cc9ce8a" title="Enable or Disable the specified interrupt source.">RTC_IntConfig</a>(<a class="code" href="group___r_t_c___i_t.html#gafc89f21be264612354b2e5663ef00744">RTC_INT_CSEC</a>, <a class="code" href="group___exported___types.html#ggac03f53915dd13820e0dfd3b3c93bed17a7d46875fa3ebd2c34d2756950eda83bf">ENABLE</a>);
<a name="l00493"></a>00493   <a class="code" href="group___r_t_c___exported___functions.html#ga7f0252599bfe1c0a8222bc595b900260" title="Configure the RTC prescaler.">RTC_SetPrescaler</a>(<a class="code" href="group___r_t_c___exported___types.html#gga9dafe1e62bbe03dfdca4dc902349aabfab0c971b89f2921b9990f66ff31f28ce0">RTC_RPRE_32768</a>);
<a name="l00494"></a>00494 }
<a name="l00495"></a>00495 
<a name="l00496"></a>00496 <span class="comment">/*********************************************************************************************************/</span><span class="comment">/**</span>
<a name="l00497"></a>00497 <span class="comment">  * @brief  Determine if a year is a leap year or not.</span>
<a name="l00498"></a>00498 <span class="comment">    * @param  year: a specific year.</span>
<a name="l00499"></a>00499 <span class="comment">  * @retval The status of the leap year check, TRUE or FALSE.</span>
<a name="l00500"></a>00500 <span class="comment">  ***********************************************************************************************************/</span>
<a name="l00501"></a><a class="code" href="group___calendar___backup_domain.html#ga2448b5456c2e0177377dc089ff265da2">00501</a> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="group___calendar___backup_domain.html#ga2448b5456c2e0177377dc089ff265da2" title="Determine if a year is a leap year or not.">IsLeapYear</a>(<a class="code" href="group___exported___types.html#ga10e94b422ef0c20dcdec20d31a1f5049">u32</a> year)
<a name="l00502"></a>00502 {
<a name="l00503"></a>00503   <span class="keywordflow">if</span> (((year % 4 == 0) &amp;&amp; (year % 100 != 0) ) || (year % 400 == 0) )
<a name="l00504"></a>00504     <span class="keywordflow">return</span> <a class="code" href="group___exported___types.html#ggaf6a258d8f3ee5206d682d799316314b1aa82764c3079aea4e60c80e45befbb839">TRUE</a>;
<a name="l00505"></a>00505   <span class="keywordflow">else</span>
<a name="l00506"></a>00506     <span class="keywordflow">return</span> <a class="code" href="group___exported___types.html#ggaf6a258d8f3ee5206d682d799316314b1aa1e095cc966dbecf6a0d8aad75348d1a">FALSE</a>;
<a name="l00507"></a>00507 }
<a name="l00508"></a>00508 
<a name="l00509"></a>00509 <span class="preprocessor">#if (HT32_LIB_DEBUG == 1)</span>
<a name="l00510"></a>00510 <span class="preprocessor"></span><span class="comment">/*********************************************************************************************************/</span><span class="comment">/**</span>
<a name="l00511"></a>00511 <span class="comment">  * @brief  Report both the error name of the source file and the source line number.</span>
<a name="l00512"></a>00512 <span class="comment">  * @param  filename: pointer to the source file name.</span>
<a name="l00513"></a>00513 <span class="comment">  * @param  uline: error line source number.</span>
<a name="l00514"></a>00514 <span class="comment">  * @retval None</span>
<a name="l00515"></a>00515 <span class="comment">  ***********************************************************************************************************/</span>
<a name="l00516"></a>00516 <span class="keywordtype">void</span> assert_error(<a class="code" href="group___exported___types.html#gaed742c436da53c1080638ce6ef7d13de">u8</a>* filename, <a class="code" href="group___exported___types.html#ga10e94b422ef0c20dcdec20d31a1f5049">u32</a> uline)
<a name="l00517"></a>00517 {
<a name="l00518"></a>00518   <span class="comment">/*</span>
<a name="l00519"></a>00519 <span class="comment">     This function is called by IP library that the invalid parameters has been passed to the library API.</span>
<a name="l00520"></a>00520 <span class="comment">     Debug message can be added here.</span>
<a name="l00521"></a>00521 <span class="comment">     Example: printf(&quot;Parameter Error: file %s on line %d\r\n&quot;, filename, uline);</span>
<a name="l00522"></a>00522 <span class="comment">  */</span>
<a name="l00523"></a>00523 
<a name="l00524"></a>00524   <span class="keywordflow">while</span> (1)
<a name="l00525"></a>00525   {
<a name="l00526"></a>00526   }
<a name="l00527"></a>00527 }
<a name="l00528"></a>00528 <span class="preprocessor">#endif</span>
<a name="l00529"></a>00529 <span class="preprocessor"></span>
<a name="l00530"></a>00530 <span class="comment"></span>
<a name="l00531"></a>00531 <span class="comment">/**</span>
<a name="l00532"></a>00532 <span class="comment">  * @}</span>
<a name="l00533"></a>00533 <span class="comment">  */</span>
<a name="l00534"></a>00534 <span class="comment"></span>
<a name="l00535"></a>00535 <span class="comment">/**</span>
<a name="l00536"></a>00536 <span class="comment">  * @}</span>
<a name="l00537"></a>00537 <span class="comment">  */</span>
<a name="l00538"></a>00538 <span class="comment"></span>
<a name="l00539"></a>00539 <span class="comment">/**</span>
<a name="l00540"></a>00540 <span class="comment">  * @}</span>
<a name="l00541"></a>00541 <span class="comment">  */</span>
</pre></div></div>
</div>
<html xmlns="http://www.w3.org/TR/REC-html40">
<head>
<meta http-equiv=Content-Type content="text/html;">
<style>
<!--
p.MsoToc1, li.MsoToc1, div.MsoToc1 {
	font-size:10.0pt;
	font-family:"Times New Roman";
	font-weight:bold;
}
a:link, span.MsoHyperlink {
	color:blue;
	text-decoration:underline;
	text-underline:single;
}
a:visited, span.MsoHyperlinkFollowed {
	color:purple;
	text-decoration:underline;
	text-underline:single;
}
p.Title1, li.Title1, div.Title1 {
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Times New Roman";
	font-weight:bold
}
-->
</style>
</head>

<body>
<div class=Section1 style='layout-grid:18.0pt'>
<div style='border:none;border-bottom:solid windowtext 1.0pt; padding:0cm 0cm 1.0pt 0cm'> </div>
<p align=center style='text-align:center'>
For complete information of HT32 Series 32-bit Microcontrollers platform visit
<a target="_blank" href="http://www.holtek.com/">Holtek Website</a></p>
<br>
<br>
</div>
</body>
</html>
