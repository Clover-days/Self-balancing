<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>HT32F5xxxx Standard Peripheral Firmware Library: </title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">HT32F5xxxx Standard Peripheral Firmware Library&#160;<span id="projectnumber">V1.9.1(7446)</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="page2.html">HT32F5xxxx Peripheral Examples</a>      </li>
    </ul>
  </div>
</div>
<div class="contents">
<div class="textblock"><div class="fragment"><pre class="fragment">
 * @file    USBD/HID_DemoVendorReport/readme.txt
 * @version V2.00
 * @date    2020-02-27
 * @brief   Description of USB Device HID example.
 </pre></div><dl class="user"><dt><b>Example Description:</b></dt><dd></dd></dl>
<p>The USB Device HID example code which shows how to use the HT32 USB Device Library, enumeration, Endpoint transfer (INTERRUPT Transfer), and HID Get/Set Report (CONTROL Transfer). This example defines 6 reports including Input, Output, and Feature Report. The example simply loopback n bytes data from the HID Output report to the Input report. The default setting of the reports and data flow is as below. The report size large than 64 Bytes is also shown in this example (which can be used only in the CONTROL Transfer).</p>
<p>The HID Demo UI can be used to test all the reports. Please rename the file, "HID_Demo_UI.e_x_e" as "HID_Demo_UI.exe" and execute it. The default setting can be found in the screenshot, "HID_Demo_UI_setting.png".</p>
<p>Notice that some OS will ask the USB device to enter the suspend mode if no communication is ongoing between the USB host and USB device (no opened handler by UI). The device will be resume automatically once the UI connects to the USB device (open a handler).</p>
<pre></pre><pre>  Default Report Settings:</pre><pre>  Report ID (RPT_ID_n)     Type (RPT_TYPE_n)       Length in Byte (RPT_LEN_n)
  =====================    ==================      ============================
    0x1                      INPUT                   768
    0x2                      INPUT                   32
    0x3                      OUTPUT                  768
    0x4                      OUTPUT                  32
    0x5                      FEATURE                 63
    0x6                      FEATURE                 32</pre><pre>  Data Flow:</pre><pre>  Host                             Dir     Device
  ==========                       ====    ==========
  CONTROL Transfer
    Set Output Report   (ID=3)      -&gt;       Save to gRPT_Buffer3[] and copy to gRPT_Buffer1[] (By "USBDClass_ReportProcess()")
    Set Output Report   (ID=4)      -&gt;       Save to gRPT_Buffer4[] and copy to gRPT_Buffer2[] (By "USBDClass_ReportProcess()")
    Get Input Report    (ID=1)      &lt;-       Transmit data from gRPT_Buffer1[]
    Get Input Report    (ID=2)      &lt;-       Transmit data from gRPT_Buffer2[]
    Set Feature Report  (ID=5)      -&gt;       Save to gRPT_Buffer5[]
    Set Feature Report  (ID=6)      -&gt;       Save to gRPT_Buffer6[]
    Get Feature Report  (ID=5)      &lt;-       Transmit data from gRPT_Buffer5[]
    Get Feature Report  (ID=6)      &lt;-       Transmit data from gRPT_Buffer6[]</pre><pre>  INTERRUPT Transfer (Report length must &lt;= 64 Bytes)
    Write Output Report (ID=4)      -&gt;       Save to gRPT_Buffer4[] and copy to gRPT_Buffer2[] (By "USBDClass_EPT1INProcess()")
    Read Input Report   (ID=2)      &lt;-       Transmit data from gRPT_Buffer2[]</pre><pre></pre><p>The related settings can be found in the file, "ht32_usbd_class.h" and shown as below.</p>
<pre></pre><pre>  1. Usage Page: USAGE_PAGE_L
     The low byte of the Usage page located at "USB_HID_ReportDesc[]". The PC UI use this parameter to find
     the interface of the HID device.</pre><pre>  2. Report Enable Control: RPT_EN_n
     Control the Report Descriptor of each report is included in the "USB_HID_ReportDesc[]" or not. Notice
     that it simply changes the content of the "USB_HID_ReportDesc[]", the control logic/code is not affected
     by the "RPT_EN_n".</pre><pre>  3. Report ID: RPT_ID_n
     The report ID of each report. It is used by the "USB_HID_ReportDesc[]".</pre><pre>  4. Report Length: RPT_LEN_n
     The report length of each report.</pre><pre>  5. Report Type: RPT_TYPE_n
     The report type of each report. It is used by the "USB_HID_ReportDesc[]". Notice that it simply changes
     the content of the "USB_HID_ReportDesc[]", you shall modify the "USBDClass_GetReport()",
     "USBDClass_SetReport()" if you change the type.
       RPT_TYPE_n = 0x81: INPUT Report
       RPT_TYPE_n = 0x91: OUTPUT Report
       RPT_TYPE_n = 0xb1: FEATURE Report</pre><pre></pre><dl class="user"><dt><b>Directory Contents:</b></dt><dd></dd></dl>
<ul>
<li>USBD/HID_DemoVendorReport/main.c Main program</li>
<li>USBD/HID_DemoVendorReport/ht32fxxxxx_nn_it.c Interrupt handlers</li>
<li>USBD/HID_DemoVendorReport/ht32fxxxxx_nn_usbdconf.h USB Device Library configuration file</li>
<li>USBD/HID_DemoVendorReport/ht32_usbd_class.c USB Device Class related function</li>
<li><a class="el" href="example_2_u_s_b_d_2_h_i_d___demo_vendor_report_2ht32__usbd__class_8h.html" title="The header file of USB Device Class.">USBD/HID_DemoVendorReport/ht32_usbd_class.h</a> Header file of the USB Device Class</li>
<li>USBD/HID_DemoVendorReport/ht32_usbd_descriptor.c Descriptor of USB Device</li>
<li><a class="el" href="example_2_u_s_b_d_2_h_i_d___demo_vendor_report_2ht32__usbd__descriptor_8h.html" title="The USB descriptor.">USBD/HID_DemoVendorReport/ht32_usbd_descriptor.h</a> Header file of the USB Device Descriptor</li>
<li>USBD/HID_DemoVendorReport/HID_Demo_UI.e_x_e HID Demo UI</li>
<li>USBD/HID_DemoVendorReport/HID_Demo_UI_setting.png Settings screenshot of HID Demo UI</li>
</ul>
<dl class="user"><dt><b>Hardware and Software Environment:</b></dt><dd></dd></dl>
<ul>
<li>This example can be run on HT32 Series development kit.</li>
<li>This example uses the following endpoints. <pre>
  Endpoint    Transfer Type         Buffer Length
  ========    ====================  ==============
  0           Control               64 bytes
  1           Interrupt IN          64 bytes
  2           Interrupt OUT         64 bytes
</pre></li>
</ul>
<p>Please create a project according to the project_template and add the following extra source files into it.</p>
<ul>
<li>ht32_usbd_class.c</li>
<li>ht32_usbd_descriptor.c</li>
</ul>
<dl class="user"><dt><b>Low Power mode:</b></dt><dd></dd></dl>
<p>For the convenient during debugging and evaluation stage, the <a class="el" href="example_2_c_k_c_u_2_h_s_i___auto_trim___by___u_s_b_2ht32f5xxxx__01__usbdconf_8h.html#a0cab6b5c44b15f5e60fdf62c5913d648">USBDCore_LowPower()</a> in the main.c is map to a null function by default. In the real product, you must map this function to the low power function of firmware library by setting USBDCORE_ENABLE_LOW_POWER as 1 (in the ht32fxxxx_usbdconf.h file).</p>
<dl class="user"><dt><b>USB Library debug mode:</b></dt><dd></dd></dl>
<p>For debug purpose, your can turn on the USB Library debug mode by setting "USBDCORE_DEBUG" definition value as 1 (which located at <a class="el" href="ht32__usbd__core_8h.html" title="The header file of standard protocol related function for HT32 USB Device Library.">ht32_usbd_core.h</a>). The debug message will be shown via the printf function to the UART or ITM interface according to the retarget setting of firmware library.</p>
<p>NOTE THAT USB DEBUG MODE DEGRADES THE PERFORMANCE AND MAY CAUSE USB ERROR UNDER SOME CONDITIONS.</p>
<p>You shall turn off the USB debug mode on your final application. We strongly recommend turn off the "Dump USB Debug data (USBDCORE_DEBUG_DATA)" option when you enable the USB debug mode and retarget the message to UART.</p>
<dl class="user"><dt><b>Firmware Disclaimer Information</b></dt><dd></dd></dl>
<p>1. The customer hereby acknowledges and agrees that the program technical documentation, including the code, which is supplied by Holtek Semiconductor Inc., (hereinafter referred to as "HOLTEK") is the proprietary and confidential intellectual property of HOLTEK, and is protected by copyright law and other intellectual property laws.</p>
<p>2. The customer hereby acknowledges and agrees that the program technical documentation, including the code, is confidential information belonging to HOLTEK, and must not be disclosed to any third parties other than HOLTEK and the customer.</p>
<p>3. The program technical documentation, including the code, is provided "as is" and for customer reference only. After delivery by HOLTEK, the customer shall use the program technical documentation, including the code, at their own risk. HOLTEK disclaims any expressed, implied or statutory warranties, including the warranties of merchantability, satisfactory quality and fitness for a particular purpose.</p>
<h2><center>Copyright (C) Holtek Semiconductor Inc. All rights reserved</center></h2>
</div></div>
<html xmlns="http://www.w3.org/TR/REC-html40">
<head>
<meta http-equiv=Content-Type content="text/html;">
<style>
<!--
p.MsoToc1, li.MsoToc1, div.MsoToc1 {
	font-size:10.0pt;
	font-family:"Times New Roman";
	font-weight:bold;
}
a:link, span.MsoHyperlink {
	color:blue;
	text-decoration:underline;
	text-underline:single;
}
a:visited, span.MsoHyperlinkFollowed {
	color:purple;
	text-decoration:underline;
	text-underline:single;
}
p.Title1, li.Title1, div.Title1 {
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Times New Roman";
	font-weight:bold
}
-->
</style>
</head>

<body>
<div class=Section1 style='layout-grid:18.0pt'>
<div style='border:none;border-bottom:solid windowtext 1.0pt; padding:0cm 0cm 1.0pt 0cm'> </div>
<p align=center style='text-align:center'>
For complete information of HT32 Series 32-bit Microcontrollers platform visit
<a target="_blank" href="http://www.holtek.com/">Holtek Website</a></p>
<br>
<br>
</div>
</body>
</html>
